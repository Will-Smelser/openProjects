var HashRouter=function(){var a=/\{([\w\d]+)(\:.+)?\}/,t=this;this.paths=[],this.noRoute=function(a){console&&console.log("No match for path: "+a)},this.Expression=function(t){var n=t.match(a);this.evaluate=function(a){if(n.length>2&&n[2]){var t=new RegExp(n[2].substr(1));if(!a||!a.match(t))return}return n[1]}},this.Path=function(n,h){this.data=[],this.fn=h;var i=n.split("/");for(var o in i)this.data.push(i[o].match(a)?new t.Expression(i[o]):i[o])},this.addPath=function(a,n){t.paths.push(new t.Path(a,n))},this.evaluate=function(a){var n=new t.Path("#"===a[0]?a.substr(1):a);for(var h in t.paths){var i={},o=!0;if(t.paths[h].data.length==n.data.length){for(var s in t.paths[h].data)if(t.paths[h].data[s]instanceof t.Expression){var e=t.paths[h].data[s].evaluate(n.data[s]);if(!e){o=!1;break}i[e]=n.data[s]}else if(t.paths[h].data[s]!==n.data[s]){o=!1;break}if(o)return t.paths[h].fn?t.paths[h].fn(i):i}}t.noRoute&&t.noRoute(a)},this.start=function(){if("onhashchange"in window.document.body)return window.onhashchange=function(){t.evaluate(window.location.hash)},void t.evaluate(window.location.hash);var a="";setInterval(function(){var n=window.location.hash;n!==a&&(a=n,t.evaluate(n))},100)}};