var HashRouter=function(){var a=/\{([\w\d]+)(\:.+)?\}/,t=this;this.paths=[],this.Expression=function(t){var n=t.match(a);this.evaluate=function(a){if(n.length>2&&n[2]){var t=new RegExp(n[2].substr(1));if(!a||!a.match(t))return}return n[1]}},this.Path=function(n,h){this.data=[],this.fn=h;var s=n.split("/");for(var e in s)s[e].match(a)?this.data.push(new t.Expression(s[e])):this.data.push(s[e])},this.noRoute=function(a){console&&console.log("No match for path: "+a)},this.addPath=function(a,n){t.paths.push(new t.Path(a,n))},this.evaluate=function(a){var n=new t.Path("#"===a[0]?a.substr(1):a);for(var h in t.paths){var s={},e=!0;if(t.paths[h].data.length==n.data.length){for(var i in t.paths[h].data)if(t.paths[h].data[i]instanceof t.Expression){var o=t.paths[h].data[i].evaluate(n.data[i]);if(!o){e=!1;break}s[o]=n.data[i]}else if(t.paths[h].data[i]!==n.data[i]){e=!1;break}if(e)return t.paths[h].fn?t.paths[h].fn(s):s}}t.noRoute&&t.noRoute(a)},this.start=function(a){"undefined"==typeof a&&(a=100);var n=window.location,h="";return"onhashchange"in window.document.body?(window.onhashchange=function(){t.evaluate(n.hash)},void t.evaluate(n.hash)):void setInterval(function(){var a=n.hash;a!==h&&(h=a,t.evaluate(a))},a)}};