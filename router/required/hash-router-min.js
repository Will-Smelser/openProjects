var HashRouter=function(){var a=/\{([\w\d]+)(\:.+)?\}/,t=this;this.paths=[],this.noRoute=function(a){console&&console.log("No match for path: "+a)},this.Expression=function(t){var n=t.match(a);this.evaluate=function(a){if(n.length>2&&n[2]){var t=new RegExp(n[2].substr(1));if(!a||!a.match(t))return}return n[1]}},this.Path=function(n,h){this.data=[],this.fn=h;var s=n.split("/");for(var i in s)this.data.push(s[i].match(a)?new t.Expression(s[i]):s[i])},this.addPath=function(a,n){t.paths.push(new t.Path(a,n))},this.evaluate=function(a){var n=new t.Path("#"===a[0]?a.substr(1):a);for(var h in t.paths){var s={},i=!0;if(t.paths[h].data.length==n.data.length){for(var e in t.paths[h].data)if(t.paths[h].data[e]instanceof t.Expression){var o=t.paths[h].data[e].evaluate(n.data[e]);if(!o){i=!1;break}s[o]=n.data[e]}else if(t.paths[h].data[e]!==n.data[e]){i=!1;break}if(i)return t.paths[h].fn?t.paths[h].fn(s):s}}t.noRoute&&t.noRoute(a)},this.start=function(){var a=window.location;if("onhashchange"in window.document.body)return window.onhashchange=function(){t.evaluate(a.hash)},void t.evaluate(a.hash);var n="";setInterval(function(){var h=a.hash;h!==n&&(n=h,t.evaluate(h))},100)}};